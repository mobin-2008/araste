# PKGBUILD for 'araste'
# Maintainer: Mobin Aydinfar <mobin@mobintestserver.ir>

pkgname=araste
pkgver=122.e7b66f7
pkgrel=1
pkgdesc="Araste: a tool for converting Persion/Arabic to ASCII art"
arch=("any")
url="https://github.com/ekm507/araste"
depends=('python3')

# Unfortunately 'makedeb' does not currently support 'priority' & 'section' control field
# Issue #190: https://github.com/makedeb/issues/190
#priority='optional'
#section='text'
# Workaround #190
# https://github.com/makedeb/makedeb/issues/190#issuecomment-1179339372
control_fields=('Priority: optional' 'Section: text')

source=(araste::git+https://github.com/ekm507/araste#branch=main)
sha256sums=('SKIP')

pkgver() {
    echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

package() {
    cd "$srcdir"/araste/
    mkdir -p "$pkgdir/usr/bin/"
    mkdir -p "$pkgdir/usr/share/araste/"
    cp araste.py "$pkgdir/usr/bin/araste"
    cp -r fonts "$pkgdir/usr/share/araste/"
}